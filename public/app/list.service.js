"use strict";var __decorate=this&&this.__decorate||function(t,e,r,o){var a,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var i=t.length-1;i>=0;i--)(a=t[i])&&(s=(n<3?a(s):n>3?a(e,r,s):a(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},core_1=require("@angular/core"),http_1=require("@angular/http"),http_2=require("@angular/http");require("./rxjs-operators");var ListService=function(){function t(t){this.http=t,this.heroesUrl="http://www.omdbapi.com/"}return t.prototype.query=function(t){var e=new http_2.URLSearchParams;return"object"==typeof t?(e.set("s",t.s),t.y&&e.set("y",t.y.toString()),e.set("type",t.type),t.page&&e.set("page",t.page.toString())):"string"==typeof t&&(e.set("i",t),e.set("plot","full")),e},t.prototype.urlCheck=function(t){},t.prototype.dataCheck=function(t){var e=this.query(t).toString();return!!sessionStorage.getItem(e)&&JSON.parse(sessionStorage.getItem(e))},t.prototype.getData=function(t){return Promise.resolve(t)},t.prototype.getFilms=function(t){return this.http.get(this.heroesUrl,{search:this.query(t)}).toPromise().then(this.extractData).catch(this.handleError)},t.prototype.extractData=function(t){var e=t.url.replace(/\bhttp:\/\/www.omdbapi.com\/\?\b/g,""),r=t.json();return sessionStorage.setItem(e,JSON.stringify(r)),r||{}},t.prototype.handleError=function(t){return console.error("An error occurred",t),Promise.reject(t.message||t)},t=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http])],t)}();exports.ListService=ListService;